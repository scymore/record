<div class="CE-Modal" title="Edit User">
    [@ec_user id=form.id;u]
    <form class="form-horizontal" action="${path}/management/user/edit" method="post" id="editUser">
        <input type="hidden" name="id" value="${u.id!}"/>

        <div class="modal-body">
            <div class="control-group">
                <label class="control-label" for="username">Username:</label>

                <div class="controls">
                    <input type="text" value="${u.name!}" name="name" placeholder="username" class="valid"/>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="realname">Realname:</label>

                <div class="controls">
                    <input type="text" value="${u.realname!}" name="realname" placeholder="realname" class="valid"/>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="email">Email:</label>

                <div class="controls">
                    <input type="text" value="${u.email!}" name="email" placeholder="realname" class="valid"/>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-default btn-small" data-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-primary btn-small" data-loading-text="Saving...">Save</button>
        </div>
    </form>
    [/@ec_user]
    <script type="text/javascript">
        $(document).ready(function () {
            CEUtil.formValidtor.modalValid({
                handler: "#editUser",
                rules: {
                    name: {
                        required: true
                        , remote: "${path}/management/user?func=edit&id=${form.id!}"
                    },
                    realname: {
                        required: true
                    },
                    email: {
                        email: true
                    }
                }
                , messages: {
                    username: {
                        remote: "The usename has been used,please change another one."
                    }
                }
            })
        });
    </script>
</div>

